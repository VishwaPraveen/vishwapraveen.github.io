<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vishwa Praveen Portfolio</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollToPlugin.min.js"></script>

<!-- Particles.js -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<!-- Fancybox CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />

<!-- Fancybox JS -->
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat',sans-serif;}
html,body{width:100%;height:100%;scroll-behavior:smooth;transition:0.3s;}
body{background:#f5f5f5;color:#111;overflow-x:hidden;}
body.dark-mode{background:#0f0f0f;color:#fff;}

/* Header */
header{position:fixed;top:0;left:0;width:100%;padding:15px 50px;display:flex;justify-content:space-between;align-items:center;background:rgba(245,245,245,0.95);z-index:1000;box-shadow:0 2px 10px rgba(0,0,0,0.1);transition:0.3s;}
body.dark-mode header{background:rgba(15,15,15,0.95);box-shadow:0 2px 10px rgba(0,0,0,0.5);}
header h1{font-size:1.7rem;cursor:pointer;color:#0077cc;letter-spacing:1px;}
body.dark-mode header h1{color:#00c8ff;}
nav a{color:#111;text-decoration:none;margin-left:30px;font-weight:500;position:relative;transition:0.3s;}
nav a::after{content:'';position:absolute;width:0%;height:2px;bottom:-5px;left:0;background:#0077cc;transition:0.3s;}
nav a:hover::after{width:100%;}
nav a:hover{color:#0077cc;text-shadow:none;}
body.dark-mode nav a{color:#fff;}
body.dark-mode nav a:hover{color:#00c8ff;text-shadow:none;}
body.dark-mode nav a::after{background:#00c8ff;}

/* Dark/Light Toggle */
#toggleMode{font-size:1.3rem;cursor:pointer;background:none;border:none;color:#0077cc;transition:0.3s;}
body.dark-mode #toggleMode{color:#00c8ff;}

/* Sections */
section{width:100%;min-height:100vh;display:none;justify-content:center;align-items:center;text-align:center;padding:50px 20px;position:absolute;top:0;left:0;scroll-margin-top: 1.8rem; /* same height as header */}
section.active{display:flex;}
h2{font-size:3rem;margin-bottom:20px;color:#0077cc;letter-spacing:1px;text-shadow:0 2px 4px rgba(0,0,0,0.1);}
body.dark-mode h2{color:#00c8ff;text-shadow:0 2px 4px rgba(0,0,0,0.3);}
p{font-size:1.2rem;max-width:700px;margin:auto;line-height:1.6;color:#333;}
body.dark-mode p{color:#ddd;}

/* Portraits */
.portrait{border-radius:50%;width:180px;height:180px;object-fit:cover;margin:20px auto;box-shadow:0 4px 15px rgba(0,0,0,0.15);transition:0.3s;position:relative;z-index:2;will-change:transform;}
body.dark-mode .portrait{box-shadow:0 4px 15px rgba(0,0,0,0.4);}

/* Floating shapes over portrait */
.float-shape{position:absolute;width:10px;height:10px;background:#0077cc;border-radius:50%;opacity:0.6;animation:float 4s ease-in-out infinite alternate;will-change:transform;}
body.dark-mode .float-shape{background:#00c8ff;opacity:0.8;}
@keyframes float{0%{transform:translateY(0);}100%{transform:translateY(-20px);}}

/* Comic-book collage gallery */
/* Comic-book collage container */
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  grid-auto-rows: 100px;
  gap: 8px;
  grid-auto-flow: dense;
  position: relative;
}

/* Panels with overflow & dynamic shapes */
.gallery-grid a {
  display: block;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: visible; /* allow panels to pop out */
  border-radius: 6px;
  transition: transform 0.4s;
}

/*grouping thumbnails*/
.gallery-group {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  grid-auto-flow: row; /* ensures items fill left-to-right first */
  gap: 10px;
  margin-bottom: 40px;
}


.gallery-grid h2 {
  margin: 20px 0 10px;
  font-size: 1.6rem;
  text-align: left;
}


/* Overlay effect for comic vibe */
.gallery-grid a::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.05);
  pointer-events: none;
  mix-blend-mode: overlay;
  border-radius: 6px;
  transition: background 0.3s;
}

/* Slight colored tints randomly via JS will override this */



/* Comic cutout panels */
.gallery-grid img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 6px;
  clip-path: polygon(5% 0%, 100% 5%, 95% 100%, 0% 95%);
  transition: transform 0.3s, filter 0.3s, box-shadow 0.3s;
}

/* Hover effects */
.gallery-grid img:hover {
  transform: scale(1.12) rotate(0deg);
  filter: brightness(1.1);
  box-shadow: 0 12px 40px rgba(0,119,204,0.7);
}
body.dark-mode .gallery-grid img:hover {
  box-shadow: 0 12px 40px rgba(0,200,255,0.7);
}

/* Responsive tweaks */
@media(max-width:768px){
  .gallery-grid { grid-auto-rows: 90px; }
  .gallery-grid img { clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%); }
}
@media(max-width:480px){
  .gallery-grid { grid-auto-rows: 70px; }
}



/* Contact Form */
form{display:flex;flex-direction:column;gap:15px;max-width:400px;margin:auto;}
input,textarea{padding:12px;border-radius:5px;border:none;font-size:1rem;background:#eee;color:#111;}
body.dark-mode input,body.dark-mode textarea{background:#1a1a1a;color:#fff;}
input:focus,textarea:focus{outline:none;box-shadow:0 0 10px #0077cc;}
body.dark-mode input:focus,body.dark-mode textarea:focus{box-shadow:0 0 10px #00c8ff;}
button{padding:12px;background:#0077cc;border:none;border-radius:5px;color:#fff;font-weight:bold;cursor:pointer;transition:0.3s;}
body.dark-mode button{background:#00c8ff;color:#111;}
button:hover{background:#005ea3;}
body.dark-mode button:hover{background:#00aacc;}

/* Responsive */
@media(max-width:768px){header{flex-direction:column;padding:15px 20px;} nav{margin-top:10px;} h2{font-size:2.5rem;} p{font-size:1rem;}}

@media(max-width:480px){h2{font-size:2rem;} p{font-size:0.95rem;}}
</style>
</head>
<body>

<header>
  <h1 id="logo">Vishwa</h1>
  <nav>
    <a href="#home" data-target="home">Home</a>
    <a href="#about" data-target="about">About</a>
    <a href="#gallery" data-target="gallery">Gallery</a>
    <a href="#contact" data-target="contact">Contact</a>
  </nav>
  <button id="toggleMode"><i class="fa-solid fa-moon"></i></button>
</header>

<div id="particles-js" style="position:fixed;width:100%;height:100%;z-index:0;top:0;left:0;"></div>

<main style="position:relative;z-index:1;">
  <section id="home" class="active">
    <div style="position:relative;">
      <img src="https://res.cloudinary.com/vishwa-website/image/upload/v1700685155/IMG_20210305_235821_683_ydqop1.jpg" alt="Vishwa Portrait" class="portrait">
      <div class="float-shape" style="top:20%;left:30%;animation-duration:3s;"></div>
      <div class="float-shape" style="top:60%;left:70%;animation-duration:4s;"></div>
      <h2>Hello, I'm Vishwa</h2>
      <p>Welcome to my portfolio! I'm an IT enthusiast and Railway Protection Force officer blending tech, creativity, and adventure.</p>
    </div>
  </section>

  <section id="about">
    <div style="position:relative;">
      <img src="https://res.cloudinary.com/vishwa-website/image/upload/v1755708530/472002493_575642441923951_4946034577209742140_n_eph2qi.jpg" alt="Vishwa Portrait" class="portrait">
      <div class="float-shape" style="top:25%;left:60%;animation-duration:3.5s;"></div>
      <h2>About Me</h2>
      <p>I strive for growth and innovation. Whether exploring mountains or building projects, I combine discipline with a passion for tech and design.</p>
    </div>
  </section>

<section id="gallery">
  <div class="gallery-container">
    <br/><br/>
    <h2>Gallery</h2>
    <div class="gallery-album"> 
      <br/><br/>
      <!-- Each album dynamically added here -->
    </div>
  </div>
</section>


  <section id="contact">
    <div style="position:relative;">
      <img src="https://via.placeholder.com/180" alt="Vishwa Portrait" class="portrait">
      <div class="float-shape" style="top:40%;left:20%;animation-duration:3.2s;"></div>
      <h2>Contact Me</h2>
      <form>
        <input type="text" placeholder="Your Name" required>
        <input type="email" placeholder="Email" required>
        <textarea rows="5" placeholder="Message..." required></textarea>
        <button type="submit">Send Message</button>
      </form>
    </div>
  </section>
</main>

<script>
// GSAP, Particles.js, SPA, Dark Mode, Gallery scripts remain exactly as you had them
// Nothing changed except the gallery layout is now CSS-based collage

// Register GSAP plugins
gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

// Particles.js setup
let particleCount = window.innerWidth < 768 ? 30 : 80;
particlesJS("particles-js", {
  particles: { number: { value: particleCount }, color: { value: ["#0077cc","#00c8ff","#ffffff"] }, shape: { type: "circle" }, opacity: { value: 0.5 }, size: { value: 3 }, line_linked: { enable: window.innerWidth >= 768, distance: 150, color: "#0077cc", opacity: 0.2, width: 1 }, move: { enable: true, speed: 2, out_mode: "out" } },
  interactivity: { detect_on: "canvas", events: { onhover: { enable: true, mode: "grab" }, onclick: { enable: true, mode: "push" } }, modes: { grab: { distance: 200, line_linked: { opacity: 0.5 } }, push: { particles_nb: 4 } } },
  retina_detect: true
});

// Animate section elements
function animateSection(section) {
  const portrait = section.querySelector(".portrait");
  const header = section.querySelector("h2");
  const paragraph = section.querySelector("p");
  const galleryItems = section.querySelectorAll(".gallery-grid img");
  const formInputs = section.querySelectorAll("input, textarea, button");
  let tl = gsap.timeline();
  if(portrait) tl.from(portrait,{y:-50,opacity:0,duration:0.6,ease:"power2.out"});
  if(header) tl.from(header,{y:30,opacity:0,duration:0.6,ease:"power2.out"},"<0.2");
  if(paragraph) tl.from(paragraph,{y:20,opacity:0,duration:0.6,ease:"power2.out"},"<0.2");
  if(galleryItems.length>0) tl.from(galleryItems,{y:20,opacity:0,duration:0.6,stagger:0.15,ease:"power2.out"},"<0.2");
  if(formInputs.length>0) tl.from(formInputs,{y:20,opacity:0,duration:0.5,stagger:0.1,ease:"power2.out"},"<0.2");
}

// SPA Navigation
const sections = document.querySelectorAll("section");
let currentSection = document.querySelector("section.active");
function showSection(id) {
  if(currentSection.id === id) return;
  const next = document.getElementById(id);
  next.style.display = "flex";
  gsap.fromTo(next,{x:"100%",opacity:0},{x:"0%",opacity:1,duration:0.8,ease:"power2.out",onComplete:()=>{animateSection(next);if(id==="gallery") initGalleryParallax();}});
  gsap.to(currentSection,{x:"-100%",opacity:0,duration:0.8,ease:"power2.in",onComplete:()=>{currentSection.classList.remove("active");currentSection.style.display="none";currentSection.style.x="0%";next.classList.add("active");currentSection=next;}});
}
document.querySelectorAll("nav a").forEach(link=>{link.addEventListener("click",e=>{e.preventDefault();showSection(link.dataset.target);gsap.to(window,{duration:1,scrollTo:0,ease:"power2.inOut"});});});
document.getElementById("logo").addEventListener("click",()=>{showSection("home");gsap.to(window,{duration:1,scrollTo:0});});

// Dark mode toggle
document.getElementById("toggleMode").addEventListener("click",()=>{document.body.classList.toggle("dark-mode");});

// Gallery
const galleryContainer = document.querySelector(".gallery-container");

// Load gallery from CSV
async function loadGallery() {
  // Fetch CSV
  const response = await fetch("gallery-images.csv");
  const csvText = await response.text();
  const rows = csvText.trim().split("\n").map(line => line.split(","));

  // Group images by album
  const galleryGroups = {};
  rows.forEach(([group, src, href]) => {
    if (!galleryGroups[group]) galleryGroups[group] = [];
    galleryGroups[group].push({ src, href });
  });

  // Clear container
  galleryContainer.innerHTML = "";

  // Loop through albums
  for (const [groupName, images] of Object.entries(galleryGroups)) {
    // Album title
    const h2 = document.createElement("h2");
    h2.textContent = groupName;
    galleryContainer.appendChild(h2);

    // Album grid
    const groupDiv = document.createElement("div");
    groupDiv.classList.add("gallery-grid");
    galleryContainer.appendChild(groupDiv);

    // Add images
    images.forEach(({ href, src }) => {
      const a = document.createElement("a");
      a.href = href;
      a.setAttribute("data-fancybox", groupName);
      a.setAttribute("data-caption", "");

      const img = document.createElement("img");
      img.src = src;
      img.alt = "Gallery image";
      a.appendChild(img);
      groupDiv.appendChild(a);
    });

    // Apply comic/random effects for this album only
    applyGalleryEffects(groupDiv);
  }

  // Bind Fancybox
  Fancybox.bind("[data-fancybox]", {});
}

// Comic/random effects
function applyGalleryEffects(grid) {
  grid.querySelectorAll("a").forEach((a) => {
    // Random rotation
    a.style.transform = `rotate(${(Math.random() * 40 - 20).toFixed(2)}deg)`;
    a.style.zIndex = Math.floor(Math.random() * 10) + 1;

    // Random grid spans
    const spanRow = Math.floor(Math.random() * 3) + 1;
    const spanCol = Math.floor(Math.random() * 3) + 1;
    a.style.gridRowEnd = `span ${spanRow}`;
    a.style.gridColumnEnd = `span ${spanCol}`;

    // Random offset
    if (Math.random() > 0.7) {
      a.style.position = "relative";
      a.style.left = `${(Math.random() * 40 - 20).toFixed(2)}px`;
      a.style.top = `${(Math.random() * 40 - 20).toFixed(2)}px`;
    }

    // Comic color overlay
    const tints = [
      "rgba(255, 0, 0, 0.18)",
      "rgba(0, 255, 255, 0.18)",
      "rgba(255, 255, 0, 0.18)",
      "rgba(0, 255, 0, 0.18)",
      "rgba(255, 128, 0, 0.18)",
      "rgba(128, 0, 255, 0.18)"
    ];
    const overlay = document.createElement("div");
    overlay.style.position = "absolute";
    overlay.style.inset = "0";
    overlay.style.background = tints[Math.floor(Math.random() * tints.length)];
    overlay.style.pointerEvents = "none";
    overlay.style.mixBlendMode = "overlay";
    overlay.style.borderRadius = "6px";
    overlay.style.transition = "background 0.3s";
    a.appendChild(overlay);
  });
}

// Load gallery on page load
window.addEventListener("load", () => {
  loadGallery();
});


// Parallax
function initGalleryParallax(){gsap.utils.toArray(".gallery-grid img").forEach(img=>{gsap.set(img,{y:0,opacity:1});gsap.to(img,{y:"+="+20,scrollTrigger:{trigger:img.closest("section"),start:"top bottom",end:"bottom top",scrub:0.5}});});}
gsap.utils.toArray(".portrait").forEach(p=>{gsap.to(p,{y:"+=15",scrollTrigger:{trigger:p.closest("section"),start:"top bottom",end:"bottom top",scrub:0.5}});});

window.addEventListener("load",()=>{
  loadGallery();
  animateSection(currentSection);
  gsap.set(".gallery-grid img",{opacity:1,y:0});
});
</script>

</body>
	</html>
